# Развертывание проекта

## Локальная разработка

1. **Клонирование репозитория**
```bash
git clone <your-repo-url>
cd my-typescript
```

2. **Установка зависимостей**
```bash
npm install
```

3. **Настройка переменных окружения**
Создайте файл `.env.local`:
```env
BITRIX_WEBHOOK_URL=your_webhook_url_here
```

4. **Запуск в режиме разработки**
```bash
npm run dev
```

Проект будет доступен по адресу: http://localhost:3000

## Развертывание на Vercel

1. **Подготовка к деплою**
```bash
npm run build
```

2. **Настройка на Vercel**
   - Подключите GitHub репозиторий к Vercel
   - Добавьте переменную окружения `BITRIX_WEBHOOK_URL` в настройках проекта
   - Деплой произойдет автоматически

3. **Альтернативный способ через CLI**
```bash
npm install -g vercel
vercel
```

## Развертывание на других платформах

### Netlify
1. Подключите репозиторий к Netlify
2. Настройте переменные окружения
3. Команда сборки: `npm run build`
4. Папка публикации: `.next`

### Railway
1. Подключите GitHub репозиторий
2. Добавьте переменную `BITRIX_WEBHOOK_URL`
3. Railway автоматически определит Next.js проект

### Heroku
1. Создайте `Procfile`:
```
web: npm start
```
2. Настройте переменные окружения в панели Heroku
3. Деплой через Git:
```bash
git push heroku main
```

## Настройка базы данных

### SQLite (локально)
База данных создается автоматически при первом запуске в файле `users.db`.

### Для продакшена
Рекомендуется использовать внешнюю БД:
- PostgreSQL
- MySQL
- MongoDB

Обновите `src/lib/database.ts` для работы с выбранной БД.

## Мониторинг и логи

### Логи приложения
```bash
# В режиме разработки
npm run dev

# В продакшене
npm start
```

### Логи Vercel
```bash
vercel logs
```

## Безопасность

### Переменные окружения
- Никогда не коммитьте `.env.local` в Git
- Используйте `.env.example` для документации
- В продакшене настройте переменные через панель управления

### API ключи
- Храните webhook URL в переменных окружения
- Регулярно обновляйте ключи доступа
- Используйте HTTPS для всех запросов

## Производительность

### Оптимизация сборки
```bash
# Анализ размера бандла
npm run build
npx @next/bundle-analyzer
```

### Кэширование
- API ответы кэшируются автоматически
- Статические ресурсы кэшируются браузером
- Используйте CDN для статических файлов

## Troubleshooting

### Ошибки сборки
```bash
# Очистка кэша
rm -rf .next
npm run build
```

### Ошибки базы данных
```bash
# Удаление и пересоздание БД
rm users.db
npm run dev
```

### Проблемы с Битрикс24
- Проверьте корректность webhook URL
- Убедитесь, что демо-тариф активен
- Проверьте права доступа webhook'а
